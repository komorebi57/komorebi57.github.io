<!DOCTYPE html>
<html>

<head>
    <script>
        var r = 25;
        var ctx;
        var stamps = [];

        function main() {
            var c = document.getElementById('c');
            ctx = c.getContext('2d');
            c.width = window.innerWidth;
            c.height = window.innerHeight;

            ctx.fillStyle = "black";
            ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);

            for (var l = 0; l < 40; l++) {
                stamps[l] = document.createElement('canvas');
                stamps[l].width = r * 2;
                stamps[l].height = r * 2;
                var stampCtx = stamps[l].getContext('2d');


                stampCtx.beginPath();
                stampCtx.fillStyle = 'yellow';
                stampCtx.arc(r, r, r, 0, 2.0 * Math.PI);
                stampCtx.fill();
                stampCtx.closePath();

                for (var i = 0; i < r * 2; i++) {
                    for (var k = 0; k < r * 2; k++) {
                        var w = Math.sqrt((i - r) * (i - r) + (k - r) * (k - r)) + Math.random() * r;
                        if (w < r) {
                            var x = i;
                            var y = k;
                            var offset = (l + r * 0.5) % (r * 4) - r * 2;

                            // Shadow
                            stampCtx.beginPath();
                            stampCtx.fillStyle = 'red';
                            stampCtx.rect(x + offset, y, 1, 1);
                            stampCtx.closePath();
                            stampCtx.fill();
                        }
                    }
                }

            }

            animate();

        }

        var frame = 0;

        function animate() {
            frame++;

            for (var i = 0; i < stamps.length; i++) {
                ctx.drawImage(stamps[(i + frame) % stamps.length], i * r * 2, 0);
            }
            window.requestAnimationFrame(animate);
        }
        window.addEventListener('load', main);

    </script>
    <style>
        body {
            margin: 0;
        }
        
        canvas {
            display: block;
        }

    </style>
</head>

<body>
    <canvas id="c"></canvas>
</body>

</html>
