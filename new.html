<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <script>
    var ctx;
    var c;
    var f =5;
    var a = 2;
    var b = 0.009;

    var offc;
    var offctx;
        
    window.addEventListener('load', function() {
        c = document.getElementById('c');
        c.width = window.innerWidth;
        c.height = window.innerHeight;
        ctx = c.getContext("2d");
//ctx.filter = grayscale('100%');
        offc = document.createElement('canvas');
        offc.width = 100;
        offc.height = 100;
        offctx = offc.getContext('2d');
        offctx.drawImage(document.querySelector('img'), 0, 0, 100, 100);
        update();
    });
        
    function update(){
        var w = window.innerWidth;
        var h = window.innerHeight;
        var c = 5;

        for(var n = 1; n < 4000; n++) {
            var r = c * Math.sqrt(n);
            var t = n * 2 * Math.PI * 0.381966;
            var x = w / 2 + Math.cos(t) * r;
            var y = h / 2 - Math.sin(t) * r;
            
            var ix = Math.floor(x / w * 100);
            var iy = Math.floor(y / h * 100);
            var cols = offctx.getImageData(ix, iy, 1, 1).data;
            var cr = Math.min(255, Math.floor(cols[0] * 1.3));
            var cg = Math.min(255, Math.floor(cols[1] * 1.1));
            var cb = Math.min(255, Math.floor(cols[2] * 1.2));

            ctx.beginPath();
            ctx.fillStyle = 'rgb(' + cr + ', ' + cg + ', ' + cb + ')';
            ctx.arc(x, y, 3, 0, 2.0 * Math.PI); 
            ctx.fill();
            ctx.closePath();
        }

    };
        
        
    </script>
    <style>
    html, body {
        margin: 0;
    }
    canvas {
        display: block;
    }
    img {
        display: none;
        }
  img.filter(ERODE);
    </style>
</head>
<body>
    <canvas id="c"></canvas>
    <img src="now3.jpg" alt="img1" width="100" height="100">
    </body>
</html>
